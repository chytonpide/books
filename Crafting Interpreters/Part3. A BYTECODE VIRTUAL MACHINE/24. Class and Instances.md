# Class and Instances 요약

클래스와 인스턴스 기능을 구현한다.
이 기능을 사용해서 자유롭게 더 큰 단위로 데이터를 집약 할 수 있다.  
클래스의 런타임 표현을 먼저 구현한다.
클래스 선언의 컴파일을 구현한다. 클래스 이름을 선언, OP_CLASS 옵코드 에밋, 클래스 이름 정의의 순으로 컴파일 한다.
런타임에서는 OP_CLASS 를 인터프리팅 하면서 ObjClass 를 생성한다.

인스턴스 기능을 구현한다. 클래스의 중요한 두가지 목적은 다음과 같다.
- 새로운 인스턴스를 생성하는 방법
- 클래스의 모든 인스턴스가 어떻게 행동하는지 정의하는 메서드를 포함한다.
인스턴스의 런타음 표현을 구현한다. 인스턴스는 필드를 가진다.
런타임에 OBJ_CLASS 를 call 하는 것으로 인스턴스를 초기화 한다.

Get Set 표현식 기능을 구현한다. dot 을 포함한 Get Set 표현식은 중위식으로 취급한다.
canAssign 플래그로 OP_SET_PROPERTY 와 OP_GET_PROPERTY 를 구분해서 에밋한다.
중위식 컴파일에 의해서 인스턴스가 스택에 설정되어 있음으로 이름으로 인스턴스를 읽어온 후에 필드에 접근해서 OP_SET_PROPERTY 와 OP_GET_PROPERTY 를 인터프리팅 한다.  


# 문단별 흥미로운 내용

# 27.1 Class Objects

# 27.2 Class Declarations
- 클래스 선언을 컴파일 할때, 이름을 chunk 의 constants 에 저장하고, 이름과 함께 OP_CLASS 를 에밋하고, 이름과 함께 OP_DEFINE_GLOBAL 를 에밋한다.(런타임에 이름을 찾을 수 있도록)
- 클래스 선언을 인터프리팅 할때, OP_CLASS 의 인터프리팅에 의해서 ObjClass 가 생성되어 stack 에 올라가 있다. 이어서 OP_DEFINE_GLOBAL 의 인터프리팅에 의해 vm.globals 에 ObjClass 가 올라간다.   