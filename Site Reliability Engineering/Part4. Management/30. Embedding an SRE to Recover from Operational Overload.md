# Embedding an SRE to Recover from Operational Overload
구글에서는 SRE 팀이 프로젝트 와 반응적인 운영일을 반으로 나누는 것이 일반적인 정책이지만
이 균형은 티켓양이 늘어나면 깨질 수 있다. 운영 적인 업무에 쏟는 시간이 증가하며 서비스를 개선하는 시간이 줄어들면,
이것은 확장성과 안정성을 저해한다.
이러한 부담을 완하하는 한가지 방법은 일시적으로 외부에서 SRE 를 파견하는 것 이다.
이 SRE 는 직접적으로 티켓을 해결하는 것을 돕지 않고, 팀의 관행을 개선하는데 집중한다.
SRE 는 팀을 관찰하고 관행을 개선시키기위한 제안을 한다.
파견에 들어가기전에 SRE 의 기본 철학과 관행 및 모니터링에 관한 자료를 사전에 숙지하면 좋다.

## Phase 1: Learn the Service and Get Context
파견된 sre 의 임무는 팀의 관행들이 어떻게 서비스의 확장성에 기여하거나 저해하는지 확실하게 전달하는 것이다.
시스템에 복잡도가 증가했을 때만, 인원을 증가 시키는게 SRE 모델의 목적임을 잊지 말고,
건강한 관행이 어떻게 티켓에 사용하는 시간을 줄일 수 있는지로 관심을 돌리게 해야 한다.

### Ops Mode Versus Nonlinear Scaling
ops mode 는 서비스가 동작하도록 유지하는 특정한 방법으로, 서비스의 크기에 따라 여러 작업 아이템들이 그에 비례해서 증가하는 방법이다.
SRE 는 반대로 소프트웨어를 작성하거나 확장성에 대한 우려를 제거하는데 초점을 맞춰서 서비스의 부하가 증가하는데 있어서 서비스를 동작하도록 유지하는데 인원이 증가하지 않도록 한다.
팀은 스케일이 자신들에게 문제가 되지 않는다고 확신할 때 ops mode 에 들어가게 된다. 
쉐도우 온콜에 참여해서 진짜로 확장성이 문제가 되지 않는다고 확인했다면, 안정성향상을 저해하는 팀의 접근법을 개선에 집중하고,
다른한편 서비스가 막 시작했다면 폭팔적인 성장을 준비하는 방법에 집중해야 한다.

### Identify the Largest Sources of Stress
SRE 팀은 긴급상황의 수를 줄이데 집중하지 않고, 긴급상황을 빨리 해결하데 집중함으로 ops mode 로 떨어지는데, 보통 압도되는 압력에 의한 반응으로 나타난다.
따라서 팀의 스트레스의 영향도 따라서 서비스의 장애에 우선순위를 매겨야 한다.
몇몇의 작은 문제나 장애가 과도한 양의 스트레스를 야기하기도 한다는걸 명심해야 한다.

### Identify Kindling (불쏘시개 식별: 긴급상황의 트리거가 되는 것들)
앞으로 일어날 긴급상황을 식별해야 한다. 긴급상황을 야기하는 소스들은 다음과 같다.
- Knowledge gaps: 팀이 커지면 과도하게 전문화 되고 on-call을 수행할 수 있을 만큼 넓은 지식을 갖지 못하게될 리스크가 있다.
- Service developed by SRE that are quietly increasing in importance
- Strong dependence on "the next big thing": 나중에 사용할 솔루션이 지금의 임시적인 수정을 배제할 것이라고 믿고 문제를 몇개월동안 방치 할 수 있다.
- Common alerts that aren't diagnosed by either the dev team or SREs: 임시적인 것이라고 생각 되어 방치되는 alert 은 alert 은 충분히 조사되거나, 룰이 변경되어야 한다.
- Any service that is both the subject of complaints from your clients and lacks a formal SLI/SLO/SLA: 클라이언트의 불만의 대상이면서 공식적인 SLO가 없는 모든 서비스
- Any service with a capacity plan that is effectively "Add more servers: our servers were running out of memory last night": capacity planning 은 충분히 앞을 내다봐야 한다.
- Postmortems that only have action items for rolling back the specific changes that caused an outage: 근본 원인을 조사하는 action item 이 있어야 한다.
- Any serving-critical component for which the existing SREs respond to questions by saying, "We don't now anything about that; the devs own it": 
수용할 만한 on-call 을 제공하려면 그것이 부서졌을 때의 결과와 문제를 수정하기 위해 필요한 긴급함을 알아야 한다.

## Phase 2: Sharing Context
역학관계와 팀의 아픈 점을 조사한 후에는 포스트모템과 반복잡업의 식별과 그것을 어떻게 해결할지와 같은 모범사례로 개선의 기초를 놓아야 한다. 

### Write a Good Postmortem for the Team
건강하지 않은 팀에서 치루어진 포스트모템은 종종 비효율적이다. 이미 작성된 포스트모템에 그것을 개선하기 위한 코멘트를 하는것은 팀에 도움이 되지 않는다.
대신, 다음 장애에 On-caller 와 함께 좋은 포스트모템을 작성하는게 더 낫다.
이 문서는 SRE model 로의 이행이 버그 수정을 더 영구적으로 만듬으로써 팀에게 도움을 줄 수 있다는 것을 입증하는 기회이다.
포스트모템에 비난이 없어야 함에 대해서 대해서 다음과 같이 설명할 수 있다.
"실수는 필연적이고 시스템이 당신을 호도하거나 인지부하가 너무 큰 곳을 찾기 위해서, 당신의 사고과정을 적어줬으면 좋겠다" 

### Sort Fires According to Type (화재를 타입에 따라 분류하라)
편의를 위해서 다음의 두가지로 화재를 분류할 수 있다.
- 몇몇 화재는 있어서는 안된다. 그것들은 일반적으로 운영 업무나 반복작업을 유발한다.
- 스트레스를 유발하는 나머지도 실제로는 일의 일부이다.
두 경우 모두 이것들을 컨트롤 하기 위한 툴을 만들 필요가 있다.
팀의 화재를 두가지 타입으로 분류한 다음, 각각이 자동화되거나 받아 들일만 한 간접비용의 일이 되어야 하는지 설명해야 한다. 


## Phase 3: Driving Change
팀의 건강은 프로세스다. 팀이 자기 조정이 가능하도록 하기 위해서 이상적인 SRE 약속에 대한 좋은 멘탈 모델을 만들도록 도움을 줄 수 있다.
사람은 좋은 항상성을 가지고 있기 때문에 알맞은 초기조건을 만들기와 건강한 선택을 만드는데 필요한 작은 원칙 집합을 가르치는데 집중해야 한다.

### Start with the Basic
ops mode 와 SRE model 사이에서 분투중인 팀은 자신들의 어떤 관행이 그들을 괴롭히고 있는지 모른다.
하나하나 이것들을 해결하기 보다는 기본 원칙으로 부터 일을 해 나가는 것이 좋다.
SLO 를 정의하는 것을 첫번째 목표로 삼아야 한다. SLO 가 있어야 장애에 대한 정량적인 측정이 가능해 지고,
프로세스의 변화가 얼마나 중요해 질 수 있는지 측정할 수 있게 된다.

### Get Help Clearing Kindling (불쏘시개를 제거하는 것을 도와라)
식별해 낸 이슈를 직접 해결하고 싶은 욕구가 있겠지만, 이것을 교육의 기회로 삼아야 한다.
다음과 같은 순서를 따를 수 있다.
- 팀 멤버에 의해서 달성 될 수 있는 유용한 작업을 찾는다.
- 어떻게 이 작업이 영속적인 방식으로 이슈를 해결 할 수 있는지 명확하게 설명한. 
- 코드 리뷰나 문서 개정의 리뷰어로 활동한다.
- 두 세개의 이슈에 대해서 이것을 반복한다.
추가적인 이슈를 발견하면 팀의 상담을 할수 있도록 버그리포트를 작성해라. 이것은 정보 전파와 팀이 문서를 작성하는 것을 독력할 수 있다.
당신의 근거를 항상 설명하고, 좋은 문서는 팀이 같은 실수를 반복하는 것을 방지한다는 것을 강조해야 한다.

### Explain Your Reasoning
팀의 회복이 어느정도 궤도에 오르면, 운영 부하를 야기하는 일상적인 결정들을 바꿔야 한다.
운이 좋다면 이러한 시도에 근거를 설명해 달라는 질문이 있을 수도 있지만 없다고 해도 결정과 그 근거를 설명해야 한다.
설명을 할때는 기본 원칙에 대해 언급하면, 팀이 멘탈 모델을 만드는데 도움을 준다.
파견이 끝난 후에도 팀 스스로 이러한 결정을 할수 있도록 근거를 명확하게 설명해야 한다.
다음은 결정에 대한 완전한 설명의 예 이다.
- 테스트가 좋지 않기 때문에 최신 릴리즈를 되돌리려고 하는게 아닙니다. 에러 버짓이 이미 소진되었기 때문에 되돌리는 겁니다.
- 우리의 SLO가 타이트 하기 때문에 릴리즈는 안전하게 롤백될 필요가 있습니다. SLO를 충족하기 위해서는 복구에 쓸수 있는 시간이 많이 없음으로 롤백전에 심층 진단을 하는것은 비현실 적입니다. 

### Ask Leading Questions
사람들이 기본 원칙에 대해 생각하도록 하는 유도 질문을 해라.
여러 정책에 과한 질문에 대해, 근거에 대해 설명하다보면 SRE의 철학에 대한 이해를 강화시킨다.
유도 질문의 예는 다음과 같다.
- 경고가 빈번하게 발생하는 것 같은데, on-caller 는 보통 방해하지 않는다. 이게 SLO에 어떻게 영향을 미칠까?
- 이 턴업 절차가 꽤 복잡한 것 같다. 서비스의 새로운 인스턴스를 작성할 때 왜 그렇게 업데이트할 설정파일이 많이 있는지 알고 있나?    

### Conclusion
이장에서 설명한 교리는 SRE 팀에게 다음과 같은 것들을 제공한다.
- 왜 그들이 변해야 하는지에 대한 기술적인 관점
- 변화가 대한 강력한 예시
- SRE 들이 사용하는 지혜에 대한 논리적 설명
- 확장성 측면의 새로운 상황을 해결하기 위한 핵심 원리 
마지막으로 최종 레포트를 작성해야 한다. 이는 관점 예제 설명에 대한 반복이 된다.
이 레포트는 팀이 당신의 가르친것을 연습하는 것을 보장하기 위한 액션 아이템을 제공해야 한다.  

# Summary
운영 부하로 팀이 ops mode 로 망가지려고 할때 팀의 관행과 문제를 살펴본후,
SRE 모델로의 복구를 도와주는 제 삼자로써, SRE 를 파견할 수 있다.
이 SRE 는 팀이 운용하는 서비스와 팀에서 행해지는 관행을 살펴본 후 문제점들을 식별한다.
그 다음으로 이것들을 어떻게 개선할 수 있을지 모범사례를 보임으로써 개선의 기초를 닦는다.
이후 실제로 변화를 이끌어 내기 위해서, 기본 SRE 원리나 모범사례를 팀에 내재시키기 위한 조치를 취해야 한다.
가장 먼저 해야할 것은 SLO를 정의하는 것이다. SLO를 통해 장애에 대한 정량적인 측정과 프로세스 변화의 임팩트를 측정할 수 있다.  