# Dealing with Interrupts
운영부하는 시스템이 계속 기능하는 상태를 유지하기 위한 일들을 말한다.
보통 다음의 세가지 카테고리로 분류할 수 있다.
- Pages: 프러덕션의 경고나 실패에 관한 것으로, 프러덕션의 긴급상황에 대한 반응으로 촉발된다. SLO가 있다.
- Tickets: 고객의 요청에 관한 것으로, 어떤 조치를 취할 것을 요하는 것이다. SLO가 있기도 하다.
- Ongoing operational responsibilities: 팀이 소유한 코드의 플래그 롤아웃이나 고객에 대한 응답같은 것 이다. SLO가 없을 수도 있다.
보통 운영부하는 계획되지 않으며 누군가를 방해한다.

## Managing Operational Load
구글에서는 각 타입의 운영부하에 대한 몇가지 관리 방법을 가지고 있다.
- Pages: primary on-caller 에 의해서 관리된다. on-call 근무는 교대식으로 운영된다. secondary on-caller 는 주로 백업으로 행동한다.
- Tickets: 티켓을 다루는 방법은 팀별로 다를 수 있다. primary on-caller 와 secondary on-caller 가 on-call 근무동안 티켓을 처리하거나 팀의 누군가가 티켓을 전담해서 처리할 수도 있다.
- Ongoing operational responsibilities: 다향한 방식으로 관리 될 수 있다. primary on-caller 가 일을 하거나, 팀의 누군가가 임시로 전담하거나, on-caller가 교대시에 그것을 이어받을 수도 있다. (몇주에 걸친 롤아웃 같은 작업)

## Factors in Determining How Interrupts Are Handled (인터럽트 처리방식의 결정요인)
인터럽트를 관리하는 방법을 결정하기 위한 메트릭으로 다음과 같은것들이 유용하다.
- 인터럽트 SLO 또는 기대 응답 시간
- 뒤로 미루어지는 인터럽트 수
- 인터럽트의 심각도
- 인터럽트이 빈도
- 특정종류의 인터럽트를 다루기위해 가용할 수 있는 인원의 수
이러한 지표는 기본적으로 가장 짧은 응담 시간을 위한 것이다.

## Imperfect Machines
인간은 불완전한 기계이다. 그러한 인간에게 인터럽트가 어떻게 다루어져야 하는지 몇가지 기본적인 유영한 아이디어가 있다.

### Cognitive Flow State
몰입 상태는 생산성을 증가 시킨다. 목표와 통제를 가질 수 있는 작업에서 몰입이 발생하며,
난이도가 낮고 반복적이거나, 고난이도 문제해결 과정에서도 여기에 도달할 수 있다. 
따라서 몰입 시간을 극대화 하는것은 회사 입장에서도 개인 입장에서도 매우 바람직하다. (몰임경험은 행복과 연관된다.) 
코딩이나 프로젝트 잡업과, 페이지나 티켓에 대한 대응을 동시에 하는것이 몰입을 방해한다.
하지만 인터럽트 자체에 집중을 하게되면 인터럽트는 더이상 인터럽트가 아니게 된다.
티켓을 처리하고, 중단에서 시스템을 회복하는 것은 몰입을 유발하는 일이 된다.
따라서 on-call 과 project를 나누고 이 둘이 균형을 이루도록 해야 한다.

### Do One Thing Well
#### Distractibility (주의가 산만해질 가능성)
on-call 중이 아닌 한 엔지니어가 프로젝트에 집중하려고 할때 다음과 같은 일들이 발생할 수 있다.
- 티켓이 무작위로 할당된다.
- on-call 엔지니어에가 질문을 하기 위해서 그를 호출 한다.
- 그가 on-call 근무를 했을때 할당된 티켓의 우선순위가 올라간다.
- 몇주에 걸친 롤아웃중에 그 엔지니어가 담당한 롤아웃이 잘못되어서 그것을 처리해야 한다.
- 유저가 질문을 위해서 그 엔지니어에게 연락한다.
#### Polarizing time
distractibility 를 제한하기 위해서는 컨택스트 전환을 최소화해야 한다.
엔지니어를 interrupt 가 가능한 작업 단위로 보는것은 엔지니어의 행복과 생산성에 좋지 않다.
인간의 컨택스트전환은 생각보다 비용이 크며, 작업 스타일간에 양극화된 시간을 설정해야 한다.
일주일이 가장 이상적이나, 며칠 또는 반나절이 될 수도 있다.
시간을 양극화 한다는것은 매일 출근을 했을 때 프로젝트만 하던가, 아니면 잡무만 할지 알고 있어야 한다는 것이다.

#### General suggestions
##### On-call
primary on-caller 가 ticket 을 처리한다. 티켓이 아니더라도 interrupt-based work 를 처리한다.
on-call 근무동안은 프로젝트에서 제외되어야 하며, 프로젝트에서 중요한 역할을 한다면 on-call 근무 하면 안된다.
secondary on-caller 는 어떻게 임무를 정의하냐에 따라 다르다. 만약 단순한 백업이라면 on-call 근무중 프로젝트 작업을 할 수 있다.
인터럽트의 빈도가 높아서 primary on-caller 를 보조하는것 이라면 인터럽트 일만 해야한다.
※ on-call 근무중에 페이징이 없다고해도 문서화 작업을 하거나 여러가지 할 일들이 있다.
##### Tickets
티켓을 팀에 랜덤하게 배분하고 있다면, 당장 멈춰라 이것은 시간을 양극화 하는 원칙에 정확히 반대된다.
티켓 처리는 풀타임 잡이 되어야하며 만약 primary, secondary 로 감당할 수 없다면 추가 인원을 배정해야한다.
팀 전체에 부하를 분산시키는것은 컨택스트 스위치를 유발할 뿐이다.
##### Ongoing responsibilities
팀에 누구라도 맡을 수 있는 롤을 만들어서 이 롤을 넘겨받을 수 있도록 해야 한다.
어떤 일에 대한 절차가 잘 정의되어 있다면 특정한 한 인터럽트 기간후에도 그 일을 계속 할 필요는 없다.
인수인계 프로세스를 공식화 하라.
##### Be on interrupts, or don't be (인터럽트를 처리하는 상태에 있거나, 그러지 말아라.)
어떤 인터럽트를 특정한 사람만이 대응할 수 있는 상황이 발생하는 것을 지양해야 한다.
티켓의 경우 할당받지 않은 경우 작업을 하지 않도록 해야한다. 
할당받지 않은 티켓을 작업하다 보면 메니징을 위한 메트릭이 왜곡될 수 있다.

### Reducing Interrupts
#### Actually analyze tickets
당직 근무동안 티켓에 대해서 표면적인 해결만 한다면, 이 티켓은 계속해서 다음 근무에 재발될 것이다.
on-call 처럼 티켓 또한 상태를 공유하는 인수인계 절차가 필요하다.
티켓과 호출에 대해 정기적으로 근본원인을 파악할 수 있는지 확인해야 하고,
근본 원인을 해결할 수 있다면 이를 수정하고 그 기간동한 이 문제로 발생하는 인터럽트를 무음 처리 해야 한다.
#### Respect yourself, as well as your customers
SLO 에 따라서 행동할 수 있으며, 어떤 노력을 고객에게 다시 떠넘기는 것 또한 가능하다. 
예를들어 어떤 툴을 deprecated 하는것도 하나의 전략이 될 수 있다.
어떤 요청에 대해 자신의 권한이 필요하지 않은경우 그 요청에 포함된 작업들을 직접 수행하도록 안내할 수 있다.
고객 요청을 처리하는 전략을 세울 때의 핵심 원칙은 요청이 의미 있고, 합리적이며, 요청을 처리하는 데 필요한 모든 정보와 준비 작업이 제공되어야 한다는 것이다. 
